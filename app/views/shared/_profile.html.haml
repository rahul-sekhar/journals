%article.profile
  %h3= profile.full_name
  - if profile.is_a? Teacher
    %p.type (Teacher)

  - if can? :administrate, profile
    = render 'shared/administrate_profile_menu', profile: profile

  - profile.class.fields.each do |field|
    = render 'shared/profile_field', field_data: field, field_value: profile.send(field[:function])

  - if can? :update, profile
    = link_to "Edit profile", edit_profile_path(profile)

  - if profile.is_a? Student
    .guardians
      - profile.guardians.each do |guardian|
        = render "shared/guardian", guardian: guardian, student: profile

    .groups
      %h4 Groups
      %ul
        %li None