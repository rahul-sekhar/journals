'use strict';

angular.module('journalsApp', ['ngSanitize', 'journalsApp.filters', 'journalsApp.services', 'journalsApp.directives']).
  config(['$locationProvider', function($locationProvider) {
    $locationProvider.html5Mode(true);
  }]).
  config(['$routeProvider', function($routeProvider) {
    $routeProvider.

      when('/login', {redirectTo: '/'}).

      when('/', {redirectTo: '/people'}).

      when('/people', {templateUrl: '<%= asset_path("people.html") %>', controller: PeopleCtrl, reloadOnSearch: false}).

      when('/people/archived', {templateUrl: '<%= asset_path("people.html") %>', controller: ArchivedPeopleCtrl, reloadOnSearch: false}).

      when('/teachers', {templateUrl: '<%= asset_path("people.html") %>', controller: TeachersCtrl}).

      when('/teachers/:id', {templateUrl: '<%= asset_path("people.html") %>', controller: SingleTeacherCtrl}).

      when('/students', {templateUrl: '<%= asset_path("people.html") %>', controller: StudentsCtrl}).

      when('/students/:id', {templateUrl: '<%= asset_path("people.html") %>', controller: SingleStudentCtrl}).

      when('/guardians', {redirectTo: '/page-not-found'}).

      when('/guardians/:id', {templateUrl: '<%= asset_path("people.html") %>', controller: SingleGuardianCtrl}).

      when('/page-not-found', {templateUrl: '<%= asset_path("404.html") %>'}).

      otherwise({redirectTo: '/page-not-found'});
  }]).
  config(["$httpProvider", function(provider) {
    provider.defaults.headers.common['X-CSRF-Token'] = $('meta[name=csrf-token]').attr('content');
  }]);