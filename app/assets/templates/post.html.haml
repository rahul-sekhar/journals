%article.post
  %header.post-header
    %span.restrictions{ "title"=>"{{post.restrictions()}}", "ng-show"=>"post.restrictions()" }

    .tagged-people
      .students{ "ng-show"=>"post.students.length" }
        %h4 Students
        %ul
          %li{ "ng-repeat"=>"student in post.students" }
            %span{ "profile-name"=>"student" }

      .teachers{ "ng-show"=>"post.teachers.length" }
        %h4 Teachers
        %ul
          %li{ "ng-repeat"=>"teacher in post.teachers" }
            %span{ "profile-name"=>"teacher" }

  %h3 {{post.title}}

  .post-content{ "ng-bind-html"=>"post.content" }

    .student-observations{ "ng-show"=>"post.student_observations.length" }
      %section{ "ng-repeat"=>"observation in post.student_observations" }
        %h4 {{observation.student.name}}
        .observation-content{ "ng-bind-html"=>"observation.content" }

  %footer.post-footer
    .info
      %p.date {{post.created_at}}

      %p.author
        Posted by
        %span{ "profile-name"=>"post.author" }

      %p.tags{ "ng-show"=>"post.tag_names" }
        Tags: {{post.tag_names}}

    .options
      %p{ "ng-show"=>"post.editable" }
        %a{ "ng-href"=>"{{post.url() + '/edit'}}", "href"=>"" } Edit post


  /   .post-content
  /     != post.content

  /     - if post.student_observations.present?
  /       .student-observations
  /         - post.student_observations.each do |obs|
  /           %section
  /             %h4= obs.student.name
  /             .observation-content
  /               != obs.content

  /   - if post.comments.present?
  /     .comments
  /       %h4 Comments
  /       - post.comments.each do |comment|
  /         = render "comments/comment", comment: comment

  /   .comment-fields
  /     = render "comments/fields", comment: post.comments.build
